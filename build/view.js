window.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelectorAll("[data-toc-section]");if(!t.length)return;let e,o;try{o=new IntersectionObserver((o=>{o.forEach((o=>{o.isIntersecting&&(clearTimeout(e),e=setTimeout((()=>{const e=o.target.getAttribute("id");if(!e)return;const n=document.querySelector(`[data-toc-section="${e}"]`);if(!n)return;t.forEach((t=>t.classList.remove("active"))),n.classList.add("active");const c=n.closest(".is-style-horizontal");if(c){const t=n.offsetLeft-c.clientWidth/2+n.clientWidth/2;c.scrollTo({left:t,behavior:"smooth"})}}),100))}))}),{threshold:.5,rootMargin:"-100px 0px -50% 0px"}),t.forEach((t=>{const e=t.getAttribute("data-toc-section");if(!e)return;const n=document.getElementById(e);n&&o.observe(n)}))}catch(t){console.warn("TOC scroll tracking failed to initialize:",t)}window.addEventListener("unload",(()=>{o&&o.disconnect(),e&&clearTimeout(e)}))}));