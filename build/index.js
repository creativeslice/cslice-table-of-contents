(()=>{"use strict";var e,t={616:()=>{const e=window.wp.blocks,t=window.wp.blockEditor,n=window.wp.components,s=window.wp.i18n,r=window.wp.data,l=window.wp.element,o=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"cslice/table-of-contents","title":"Table of Contents","description":"Dynamically show titles linking to headings on this page.","category":"widgets","icon":"list-view","textdomain":"cslice-table-of-contents","supports":{"html":false,"align":["wide","full"],"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true,"fontWeight":true,"__experimentalFontWeight":true},"color":{"text":true,"background":true},"shadow":true,"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true}},"styles":[{"name":"default","label":"Default","isDefault":true},{"name":"horizontal","label":"Horizontal"}],"attributes":{"headingLevels":{"type":"object","default":{"h1":false,"h2":true,"h3":false,"h4":false}},"headings":{"type":"array","default":[]}},"usesContext":["postId"],"editorScript":"file:./index.js","viewScript":"file:./view.js","style":"file:./style-index.css"}'),i=window.ReactJSXRuntime;(0,e.registerBlockType)(o.name,{...o,edit:({attributes:e,setAttributes:o})=>{const{headingLevels:a,headings:c}=e,h=(0,l.useRef)(c),d=e=>e.reduce(((e,t)=>("core/heading"===t.name&&a[`h${t.attributes.level}`]&&e.push({content:t.attributes.content.replace(/<[^>]*>/g,""),level:t.attributes.level,anchor:t.attributes.content.toLowerCase().replace(/<[^>]*>/g,"").replace(/[^a-z0-9\s-]+/g,"").replace(/\s+/g,"-").replace(/^-+|-+$/g,"")}),t.innerBlocks?.length&&e.push(...d(t.innerBlocks)),e)),[]),u=(0,r.useSelect)((e=>{const{getBlocks:n}=e(t.store);return d(n())}),[a]);(0,l.useEffect)((()=>{JSON.stringify(h.current)!==JSON.stringify(u)&&(h.current=u,o({headings:u}))}),[u,o]);const p=(0,t.useBlockProps)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.InspectorControls,{children:(0,i.jsx)(n.PanelBody,{title:(0,s.__)("Headings to show","cslice-table-of-contents"),children:[1,2,3,4].map((e=>(0,i.jsx)(n.CheckboxControl,{label:`H${e}`,checked:a[`h${e}`],onChange:t=>o({headingLevels:{...a,[`h${e}`]:t}})},e)))})}),(0,i.jsx)("div",{...p,children:u?.length>0?(0,i.jsx)("ul",{children:u.map(((e,t)=>(0,i.jsx)("li",{className:`level-${e.level}`,children:(0,i.jsx)("a",{href:`#${e.anchor}`,"data-toc-section":e.anchor,children:e.content})},t)))}):(0,i.jsx)("p",{children:(0,s.__)("No headings found","cslice-table-of-contents")})})]})},save:({attributes:e})=>{const{headings:n}=e,s=t.useBlockProps.save();return(0,i.jsx)("div",{...s,children:n?.length>0?(0,i.jsx)("ul",{children:n.map(((e,t)=>(0,i.jsx)("li",{className:`level-${e.level}`,children:(0,i.jsx)("a",{href:`#${e.anchor}`,"data-toc-section":e.anchor,children:e.content})},t)))}):null})}})}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,s),l.exports}s.m=t,e=[],s.O=(t,n,r,l)=>{if(!n){var o=1/0;for(h=0;h<e.length;h++){for(var[n,r,l]=e[h],i=!0,a=0;a<n.length;a++)(!1&l||o>=l)&&Object.keys(s.O).every((e=>s.O[e](n[a])))?n.splice(a--,1):(i=!1,l<o&&(o=l));if(i){e.splice(h--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var h=e.length;h>0&&e[h-1][2]>l;h--)e[h]=e[h-1];e[h]=[n,r,l]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,l,[o,i,a]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(a)var h=a(s)}for(t&&t(n);c<o.length;c++)l=o[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(h)},n=globalThis.webpackChunkcslice_table_of_contents=globalThis.webpackChunkcslice_table_of_contents||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=s.O(void 0,[350],(()=>s(616)));r=s.O(r)})();